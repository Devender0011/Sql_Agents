<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gemini Data Explorer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>

<div class="container-main">

    <!-- HEADER -->
    <div class="app-header">
        <div>
            <div class="app-title">âœ¨ Gemini Data Explorer</div>
            <div class="app-subtitle">NL â†’ SQL â†’ Visual</div>
        </div>

        <div class="d-flex gap-2">
            <a href="/history" class="btn btn-outline-secondary">
                Query History
            </a>
        </div>
    </div>

    <!-- ASK THE DB -->
    <div class="card p-4">
        <div class="card-title">Ask the DB</div>

        <form action="/ask" method="post">
            <textarea
                name="question"
                class="form-control mb-3"
                placeholder="What would you like to know? Ask anything about your data..."
            >{{ question or "" }}</textarea>

            <select name="chart" class="form-select mb-3">
                <option value="">Auto chart</option>
                <option value="bar">Bar</option>
                <option value="line">Line</option>
                <option value="scatter">Scatter</option>
                <option value="pie">Pie</option>
            </select>

            <button class="btn btn-primary w-100">
                â–¶ Run Query
            </button>
        </form>
    </div>

    <!-- QUICK TEMPLATES (FEATURE PAGES) -->
    <div class="card p-4 mt-4">
        <div class="card-title">Quick Templates</div>

        <div class="quick-grid">

            <a href="/customer-analysis" class="quick-card">
                <div class="quick-icon blue">ðŸ“Š</div>
                <div>
                    <div class="quick-title">Customer Analysis</div>
                    <div class="quick-desc">
                        Analyze top customers and behavior patterns
                    </div>
                </div>
            </a>

            <a href="/revenue-insights" class="quick-card">
                <div class="quick-icon green">ðŸ’°</div>
                <div>
                    <div class="quick-title">Revenue Insights</div>
                    <div class="quick-desc">
                        Track revenue trends and growth
                    </div>
                </div>
            </a>

            <a href="/growth-metrics" class="quick-card">
                <div class="quick-icon purple">ðŸ“ˆ</div>
                <div>
                    <div class="quick-title">Growth Metrics</div>
                    <div class="quick-desc">
                        Monitor growth and performance indicators
                    </div>
                </div>
            </a>

            <a href="/user-demographics" class="quick-card">
                <div class="quick-icon orange">ðŸ‘¥</div>
                <div>
                    <div class="quick-title">User Demographics</div>
                    <div class="quick-desc">
                        Explore customer segments and profiles
                    </div>
                </div>
            </a>

        </div>
    </div>

    {% if error %}
    <div class="alert alert-danger mt-4">
        {{ error }}
    </div>
    {% endif %}

    {% if sql %}
    <div class="card p-3 mt-4">
        <div class="card-title">Generated / Validated SQL</div>
        <pre class="sql-box">{{ sql }}</pre>
    </div>
    {% endif %}

    {% if table_html %}
    <div class="card p-3 mt-4">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="card-title mb-0">Results</div>
            <a href="/download_csv" class="btn btn-sm btn-outline-secondary">
                Download CSV
            </a>
        </div>
        {{ table_html | safe }}
    </div>
    {% endif %}

    {% if plot_div %}
    <div class="card p-3 mt-4">
        <div class="card-title">Visualization</div>
        {{ plot_div | safe }}
    </div>
    {% endif %}

    {% if summary %}
    <div class="card p-3 mt-4">
        <div class="card-title">Insights</div>
        <p>{{ summary }}</p>
    </div>
    {% endif %}

</div>

</body>
</html>
